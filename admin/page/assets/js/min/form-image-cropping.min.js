var ImageCropping=function(){var a,b,c,d=function(){$("#target").Jcrop({onChange:e,onSelect:e,onRelease:f},function(){a=this}),$("#coords").on("change","input",function(b){var c=$("#x1").val(),d=$("#x2").val(),e=$("#y1").val(),f=$("#y2").val();a.setSelect([c,e,d,f])})},e=function(a){$("#x1").val(a.x),$("#y1").val(a.y),$("#x2").val(a.x2),$("#y2").val(a.y2),$("#w").val(a.w),$("#h").val(a.h)},f=function(){$("#coords input").val("")},g=function(){function d(a){if(parseInt(a.w)>0){var d=h/a.w,e=i/a.h;g.css({width:Math.round(d*b)+"px",height:Math.round(e*c)+"px",marginLeft:"-"+Math.round(d*a.x)+"px",marginTop:"-"+Math.round(e*a.y)+"px"})}}var e=$("#preview-pane"),f=$("#preview-pane .preview-container"),g=$("#preview-pane .preview-container img"),h=f.width(),i=f.height();$("#target2").Jcrop({onChange:d,onSelect:d,aspectRatio:h/i},function(){var d=this.getBounds();b=d[0],c=d[1],a=this,e.appendTo(a.ui.holder)})},h=function(){function b(a){var b=$("<button />").addClass("btn btn-sm");return a&&b.append(a),b}function c(a,b){$("#interface").prepend($("<fieldset></fieldset>").attr("id",a).append($("<legend></legend>").append(b),'<div class="btn-toolbar"><div class="btn-group"></div></div>'))}function d(b,c){return function(d){$(d.target).closest(".btn-group").find(".active").removeClass("active"),$(d.target).addClass("active");var e={};return e[b]=c,a.setOptions(e),!1}}function e(b){return function(c){return $(c.target).addClass("active"),a.animateTo(b,function(){$(c.target).closest(".btn-group").find(".active").removeClass("active")}),!1}}$("#target3").Jcrop({bgFade:!0,bgOpacity:.2,setSelect:[60,70,540,330]},function(){a=this}),$("#fadetog").on("ifChecked",function(b){a.setOptions({bgFade:!0})}),$("#fadetog").on("ifUnchecked",function(b){a.setOptions({bgFade:!1})}),$("#shadetog").on("ifUnchecked",function(a){$("#shadetxt").slideUp()}),$("#shadetog").on("ifChecked",function(a){$("#shadetxt").slideDown()});var f={bgc_buttons:"Change bgColor",bgo_buttons:"Change bgOpacity",anim_buttons:"Animate Selection"},g={anim1:[217,122,382,284],anim2:[20,20,580,380],anim3:[24,24,176,376],anim4:[347,165,550,355],anim5:[136,55,472,183]},h={Low:.2,Mid:.5,High:.8,Full:1},j={R:"#900",B:"#4BB6F0",Y:"#F0B207",G:"#46B81C",W:"white",K:"black"};for(i in f)c(i,f[i]);var k=1;for(i in g)$("#anim_buttons .btn-group").append(b(k++).click(e(g[i]))," ");$("#anim_buttons .btn-group").append(b("Bye!").click(function(b){return $(b.target).addClass("active"),a.animateTo([300,200,300,200],function(){this.release(),$(b.target).closest(".btn-group").find(".active").removeClass("active")}),!1}));for(i in h)$("#bgo_buttons .btn-group").append(b(i).click(d("bgOpacity",h[i]))," ");for(i in j)$("#bgc_buttons .btn-group").append(b(i).css({background:j[i],color:"K"==i||"R"==i?"white":"black"}).click(d("bgColor",j[i]))," ");$("#bgo_buttons .btn:first,#bgc_buttons .btn:last").addClass("active"),$("#interface").show()};return{init:function(){d(),g(),h()}}}();