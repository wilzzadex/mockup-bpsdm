var FormWizard=function(){var a=$("#wizard"),b=$("#form"),c=function(){a.smartWizard({selected:0,keyNavigation:!1,onLeaveStep:h,onShowStep:g});d(),e()},d=function(a){"undefined"!=typeof a&&""!=a||(a=1),numberOfSteps=$(".swMain > ul > li").length;var b=Math.floor(100/numberOfSteps*a);$(".step-bar").css("width",b+"%")},e=function(){$.validator.addMethod("cardExpiry",function(){return""!=$("#card_expiry_mm").val()&&""!=$("#card_expiry_yyyy").val()},"Please select a month and year"),$.validator.setDefaults({errorElement:"span",errorClass:"help-block",errorPlacement:function(a,b){"radio"==b.attr("type")||"checkbox"==b.attr("type")?a.insertAfter($(b).closest(".form-group").children("div").children().last()):"card_expiry_mm"==b.attr("name")||"card_expiry_yyyy"==b.attr("name")?a.appendTo($(b).closest(".form-group").children("div")):a.insertAfter(b)},ignore:":hidden",rules:{username:{minlength:2,required:!0},email:{required:!0,email:!0},password:{minlength:6,required:!0},password_again:{required:!0,minlength:5,equalTo:"#password"},full_name:{required:!0,minlength:2},phone:{required:!0},gender:{required:!0},address:{required:!0},city:{required:!0},country:{required:!0},card_name:{required:!0},card_number:{minlength:16,maxlength:16,required:!0},card_cvc:{digits:!0,required:!0,minlength:3,maxlength:4},card_expiry_yyyy:"cardExpiry",payment:{required:!0,minlength:1}},messages:{firstname:"Please specify your first name"},highlight:function(a){$(a).closest(".help-block").removeClass("valid"),$(a).closest(".form-group").removeClass("has-success").addClass("has-error").find(".symbol").removeClass("ok").addClass("required")},unhighlight:function(a){$(a).closest(".form-group").removeClass("has-error")},success:function(a,b){a.addClass("help-block valid"),$(b).closest(".form-group").removeClass("has-error").addClass("has-success").find(".symbol").removeClass("required").addClass("ok")}})},f=function(){$(".display-value",form).each(function(){var a=$('[name="'+$(this).attr("data-display")+'"]',form);"text"==a.attr("type")||"email"==a.attr("type")||a.is("textarea")?$(this).html(a.val()):a.is("select")?$(this).html(a.find("option:selected").text()):a.is(":radio")||a.is(":checkbox")?$(this).html(a.filter(":checked").closest("label").text()):"card_expiry"==$(this).attr("data-display")&&$(this).html($('[name="card_expiry_mm"]',form).val()+"/"+$('[name="card_expiry_yyyy"]',form).val())})},g=function(b,c){$(".next-step").unbind("click").click(function(b){b.preventDefault(),a.smartWizard("goForward")}),$(".back-step").unbind("click").click(function(b){b.preventDefault(),a.smartWizard("goBackward")}),$(".finish-step").unbind("click").click(function(a){a.preventDefault(),i(b,c)})},h=function(a,b){return j(b.fromStep,b.toStep)},i=function(a,b){k()&&(alert("form submit function"),$(".anchor").children("li").last().children("a").removeClass("wait").removeClass("selected").addClass("done"))},j=function(a,c){var e=!1;if(numberOfSteps>c&&c>a){if(b.valid())return b.validate().focusInvalid(),$(".anchor").children("li:nth-child("+a+")").children("a").removeClass("wait"),d(c),e=!0,!0}else{if(a>c)return $(".anchor").children("li:nth-child("+a+")").children("a").addClass("wait"),d(c),!0;if(b.valid())return $(".anchor").children("li:nth-child("+a+")").children("a").removeClass("wait"),f(),d(c),!0}},k=function(){var a=!0;return a};return{init:function(){c()}}}();